<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>热门歌曲</title>
</head>
<body>
    
    <table id="iAmHere">

    </table>
</body>

<script>
// ajax  
fetch('http://www.huishiguang.com:3000/playlist/detail?id=3072311543',{
    method:"get", // 方法  get获取  post传递   del删除   upadate更新
    mode:"cors"  //no-cors不跨域  cors跨
})
// 接受到一个数据流  这里面有fetch玩服务器后的基本信息 包括状态 success
// 网络代码 404 200 数据流等  对象格式  json
// 用。json转回json格式
.then(function(r){
    return r.json()
})
// 这一步是处理服务器返回的数据 
.then(function(data){
    console.log(data)
    let strHtml = `<tr>
                    <td>歌曲名称</td>
                    <td>歌曲ID</td>
                    <td>临时播放器</td>
                </tr>`;
    data.playlist.tracks.forEach(function(value,index,arr) {
        strHtml += `<tr>
            <td>${value.name}</td>
            <td>${value.id}</td>
            <td><audio  controls="controls" src="https://music.163.com/song/media/outer/url?id=${value.id}.mp3"></audio></td>
        </tr>`;
    });
    let table = document.getElementById('iAmHere');
    table.innerHTML=strHtml;
})

fetch('http://www.huishiguang.com:3000/playlist/detail?id=3072311543',{
    method:"get",
    mode:"cors"
})
.then(function(r){
    return r.json()
})
</script>
</html>